asyncapi: 2.4.0
id: urn:stingeripc:Example
info:
  version: 0.0.1
  title: Fully Featured Example Interface
channels:
  Example/interface:
    subscribe:
      operationId: interfaceInfo
      message:
        $ref: '#/components/messages/interfaceInfo'
  Example/signal/todayIs:
    subscribe:
      operationId: todayIs
      message:
        $ref: '#/components/messages/todayIs'
      traits:
      - $ref: '#/components/operationTraits/signal'
  Example/method/addNumbers:
    publish:
      operationId: addNumbers
      message:
        $ref: '#/components/messages/addNumbers'
      traits:
      - $ref: '#/components/operationTraits/methodCall'
  client/{client_id}/Example/method/addNumbers/response:
    subscribe:
      operationId: addNumbersResponse
      message:
        $ref: '#/components/messages/addNumbersResponse'
      traits:
      - $ref: '#/components/operationTraits/methodCall'
  Example/method/doSomething:
    publish:
      operationId: doSomething
      message:
        $ref: '#/components/messages/doSomething'
      traits:
      - $ref: '#/components/operationTraits/methodCall'
  client/{client_id}/Example/method/doSomething/response:
    subscribe:
      operationId: doSomethingResponse
      message:
        $ref: '#/components/messages/doSomethingResponse'
      traits:
      - $ref: '#/components/operationTraits/methodCall'
components:
  operationTraits:
    methodCall:
      bindings:
        mqtt:
          bindingVersion: 0.2.0
          qos: 2
          retain: false
    methodCallback:
      bindings:
        mqtt:
          bindingVersion: 0.2.0
          qos: 1
          retain: false
    signal:
      bindings:
        mqtt:
          bindingVersion: 0.2.0
          qos: 2
          retain: false
  messageTraits:
    methodJsonArguments:
      bindings:
        mqtt:
          bindingVersion: 0.2.0
          contentType: application/json
          correlationData:
            type: string
            format: uuid
    methodJsonResponse:
      bindings:
        mqtt:
          bindingVersion: 0.2.0
          contentType: application/json
          correlationData:
            type: string
            format: uuid
          responseTopic:
            type: string
    signalJson:
      bindings:
        mqtt:
          bindingVersion: 0.2.0
          contentType: application/json
  messages:
    interfaceInfo:
      name: interfaceInfo
      payload:
        properties:
          name:
            const: Example
            type: string
          summary:
            const: Example StingerAPI interface which demonstrates most features.
            type: string
          title:
            const: Fully Featured Example Interface
            type: string
          version:
            const: 0.0.1
            type: string
        required:
        - name
        - summary
        - title
        - version
        type: object
    todayIs:
      name: todayIs
      payload:
        properties:
          dayOfMonth:
            type: integer
          dayOfWeek:
            $ref: '#/components/schemas/enum_dayOfTheWeek'
        required:
        - dayOfMonth
        - dayOfWeek
        type: object
      traits:
      - $ref: '#/components/messageTraits/signalJson'
    addNumbers:
      name: addNumbers
      payload:
        properties:
          first:
            type: integer
          second:
            type: integer
          third:
            type: integer
        required:
        - first
        - second
        - third
        type: object
      traits:
      - $ref: '#/components/messageTraits/methodJsonArguments'
    addNumbersResponse:
      headers:
        properties:
          result:
            $ref: '#/components/schemas/stinger_method_return_codes'
          debug:
            type: string
        required:
        - result
      name: addNumbersResponse
      payload:
        properties:
          sum:
            type: integer
        required:
        - sum
        type: object
      traits:
      - $ref: '#/components/messageTraits/methodJsonArguments'
    doSomething:
      name: doSomething
      payload:
        properties:
          aString:
            type: string
        required:
        - aString
        type: object
      traits:
      - $ref: '#/components/messageTraits/methodJsonArguments'
    doSomethingResponse:
      headers:
        properties:
          result:
            $ref: '#/components/schemas/stinger_method_return_codes'
          debug:
            type: string
        required:
        - result
      name: doSomethingResponse
      payload:
        properties: {}
        required: []
        type: object
      traits:
      - $ref: '#/components/messageTraits/methodJsonArguments'
  schemas:
    enum_dayOfTheWeek:
      description: "The dayOfTheWeek enum has the following values:\n 0 - Sunday\n
        1 - Monday\n 2 - Tuesday\n 3 - Wednesday\n 4 - Thursday\n 5 - Friday\n 6 -
        Saturday"
      enum:
      - 0
      - 1
      - 2
      - 3
      - 4
      - 5
      - 6
      type: integer
    stinger_method_return_codes:
      description: "The stinger_method_return_codes enum has the following values:\n
        0 - Success\n 1 - Client Error\n 2 - Server Error\n 3 - Transport Error\n
        4 - Payload Error\n 5 - Timeout\n 6 - Unknown Error\n 7 - Not Implemented"
      enum:
      - 0
      - 1
      - 2
      - 3
      - 4
      - 5
      - 6
      - 7
      type: integer
servers:
  local:
    bindings:
      mqtt:
        lastWill:
          retain: false
          message: null
          qos: 1
          topic: Example/interface
    protocol: mqtt
    protocolVersion: '5'
    url: 127.0.0.1:1883
